{
  "Job": {
    "ID": "chronograf",
    "Name": "chronograf",
    "Type": "service",
    "Datacenters": [
      "dev-lab"
    ],
    "Constraints": [{
      "LTarget": "${meta.rkt}",
      "RTarget": "1",
      "Operand": "="
    }],
    "TaskGroups": [{
      "Name": "service",
      "Count": 1,
      "Tasks": [{
        "Name": "reserve port 8888",
        "Driver": "exec",
        "Config": {
          "command": "/usr/bin/sleep",
          "args": [
            "infinity"
          ]
        },
        "Resources": {
          "CPU": 20,
          "Networks": [{
            "MBits": 10,
            "ReservedPorts": [{
              "Label": "app",
              "Value": 8888
            }]
          }]
        }
      }, {
        "Name": "api",
        "Driver": "rkt",
        "Config": {
          "image": "http://server.nomad.devlab/chronograf.{{version}}.aci",
          "insecure_options": [
            "image"
          ],
          "net": ["host"]
        },
        "Services": [{
          "Id": "",
          "Name": "chronograf",
          "Tags": [
            "dependency"
          ]
        }],
        "Resources": {
          "CPU": 500,
          "MemoryMB": 256,
          "Networks": [{
            "MBits": 10
          }]
        },
        "LogConfig": {
          "MaxFiles": 5,
          "MaxFileSizeMB": 10
        }
      }],
      "RestartPolicy": {
        "Interval": 300000000000,
        "Attempts": 10,
        "Delay": 25000000000,
        "Mode": "delay"
      },
      "EphemeralDisk": {
        "SizeMB": 250
      }
    }]
  }
}
